<h1 translate>Manage Users</h1>

<h3 ng-if="!users">
    <div class="process-img"></div>
    <span translate>Loading Data...</span>
</h3>
<div class="btn-group">
    <button type="button" class="btn btn-default" ng-click="editUserDialog()" translate>New User</button>
</div>

<table class="table" ng-show="users.length">
    <thead>
    <tr>
        <th translate>Gravatar</th>
        <th translate>Login Name</th>
        <th translate>Name</th>
        <th translate>Organisation</th>
        <th translate>Location</th>
        <th translate>Role</th>
        <th translate>Created</th>
        <th translate>Actions</th>
    </tr>
    </thead>
    <tbody>
    <tr ng-repeat="rowuser in users">
        <td><img ng-src="http://www.gravatar.com/avatar/{{rowuser.gravatar}}.png?s=36&amp;d=mm&amp;r=pg" width="36" height="36"></td>
        <td>{{rowuser.id}}<br />
            <i ng-if="rowuser.email" class="fa fa-envelope-o" popover="{{rowuser.email}}" popover-trigger="mouseenter"></i>
            <i ng-if="rowuser.verified" class="fa fa-check-circle" title="{{'Verified'|translate}}"></i>
            <i ng-if="rowuser.description" class="fa fa-info-circle" popover="{{rowuser.description}}" popover-trigger="mouseenter"></i>
            <a ng-if="rowuser.url" href="{{rowuser.url}}"><i class="fa fa-link" popover="{{rowuser.url}}" popover-trigger="mouseenter"></i></a>
        </td>
        <td>{{rowuser.name}}</td>
        <td>{{rowuser.organisation}}</td>
        <td>{{rowuser.location}}</td>
        <td>{{rowuser.role}}</td>
        <td>{{rowuser.created | amDateFormat:'LLL'}}</td>
        <td>
            <div ng-if="rowuser.processing">
                <i class="fa fa-spinner fa-spin"></i>
            </div>
            <div ng-if="!rowuser.processing">
                <!--<i class="btn btn-default fa fa-edit fa-mouse-pointer" title="{{'Edit User'|translate}}" ui-sref='admin.user({id: rowuser.id})'/>-->
                <i class="btn btn-default fa fa-edit fa-mouse-pointer" title="{{'Edit User'|translate}}" ng-click="editUserDialog(rowuser)"/>
                <i class="btn btn-default fa fa-trash-o fa-mouse-pointer" title="{{'Delete User'|translate}}" ng-click="deleteUserDialog(rowuser)"/>
            </div>
        </td>
    </tr>
    </tbody>

</table>


<script type="text/ng-template" id="deleteUserDialog.html">
    <div class="modal-header">
        <button type="button" class="close" ng-click="cancel()" aria-hidden="true">&times;</button>
        <h4 class="modal-title" translate>Delete User?</h4>
    </div>
    <div class="modal-body">
        <p translate>Sure to delete user {{user.id}}?</p>
    </div>
    <div class="modal-footer">
        <button class="btn btn-primary" ng-click="ok()" translate>OK</button>
        <button class="btn btn-warning" ng-click="cancel()" translate>Cancel</button>
    </div>
</script>

